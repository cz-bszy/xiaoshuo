---
name: outline-manager
description: "超长篇小说多层级大纲管理模块。管理400万字级别项目的多层大纲（总纲→卷纲→篇纲→章纲），支持动态调整、版本追踪。当用户提到大纲、结构、章节安排时自动激活。"
allowed-tools: Read, Edit
---

# 大纲管理模块

## 核心功能

管理超长篇小说的多层级大纲，支持灵活调整和版本追踪。

---

## 大纲层级结构

```
L0: 总纲 (Main Outline)
│   ├── 核心主线、终极目标、世界观核心
│   └── 稳定性：极高（基本不变）
│
L1: 卷纲 (Volume Outline)
│   ├── 每卷主题、主要冲突、阶段性成长
│   └── 稳定性：高（可微调）
│
L2: 篇纲 (Part Outline)
│   ├── 具体情节线、事件安排、人物发展
│   └── 稳定性：中（可调整）
│
L3: 章纲 (Chapter Outline)
│   ├── 章节内容、场景安排、具体情节
│   └── 稳定性：低（灵活调整）
│
L4: 节纲 (Section Outline) [可选]
    ├── 段落级别、对话安排
    └── 稳定性：最低（写作时生成）
```

---

## 大纲文件结构

### L0-main.md（总纲）

```markdown
# 《书名》总纲

## 核心信息

- **类型**：西方幻想、低魔、种田流
- **目标字数**：400万字
- **预计卷数**：13卷

## 核心主线

[主角的终极目标和发展方向]

## 世界观核心

- 魔法体系：[低魔设定说明]
- 社会制度：[封建领地制]
- 主要势力：[列表]

## 人物核心设定

### 主角
- 姓名：
- 身份：
- 核心目标：
- 成长方向：

### 核心配角
[列表]

## 终极结局

[结局走向和核心冲突解决方式]
```

### L1-volumes/v01.md（卷纲示例）

```markdown
# 第一卷：[卷名]

## 卷级信息

- **字数目标**：40万字（约100章）
- **时间跨度**：[故事内时间]
- **主要场景**：[地点]

## 本卷主题

[本卷核心主题和氛围]

## 本卷冲突

### 主要冲突
[描述]

### 次要冲突
[描述]

## 人物发展

### 主角
- 起点状态：
- 本卷成长：
- 终点状态：

### 新登场人物
[列表]

## 情节节奏

```
|  开局  |  发展  |  转折  |  高潮  |  收尾  |
| 1-15  | 16-50 | 51-70 | 71-90 | 91-100 |
|  铺垫  | 日常+小冲突 | 危机出现 | 危机解决 | 承上启下 |
```

## 关键里程碑

- [C20] 获得第一块领地
- [C50] 完成第一季收获
- [C80] 击退第一次威胁
- [C100] 领地初步稳定
```

### L2-parts/v01-p01.md（篇纲示例）

```markdown
# 第一卷·第一篇：[篇名]

## 篇级信息

- **章节范围**：第1-25章
- **字数目标**：7.5万字

## 情节线

### 主线
1. [章节] 事件描述
2. [章节] 事件描述
...

### 副线A
[描述]

### 副线B
[描述]

## 场景安排

| 场景 | 章节 | 主要事件 |
|------|------|---------|
| 领地 | 1-5 | 初到领地 |
| 村庄 | 6-10 | 了解情况 |
...

## 人物登场

| 人物 | 首次登场 | 作用 |
|------|---------|------|
| 老管家 | C2 | 引导介绍 |
| 村长 | C6 | 提供信息 |
...
```

### L3-chapters/v01-c001.md（章纲示例）

```markdown
# 第1章：[章节标题]

## 基本信息

- **字数目标**：3000字
- **POV**：主角
- **时间**：故事第1天
- **地点**：领地入口

## 本章目的

- [x] 主角首次登场
- [x] 展示领地初始状态
- [x] 建立基调

## 场景安排

### 场景1：抵达（1000字）
- **内容**：主角初见领地
- **氛围**：荒凉但有希望
- **重点**：视觉描写、内心独白

### 场景2：巡视（1200字）
- **内容**：查看领地情况
- **氛围**：问题重重
- **重点**：展示困难

### 场景3：下定决心（800字）
- **内容**：决定重建
- **氛围**：坚定
- **重点**：主角性格展现

## 写作要点

- 第一视角展现环境
- 适当内心描写
- 为后续埋下种子

## 注意事项

- 避免过多背景设定堆砌
- 保持节奏适中
```

---

## 命令

### `/mega-outline` - 大纲管理

```
/mega-outline view [level]     查看指定层级大纲
/mega-outline edit [file]      编辑大纲文件
/mega-outline generate [range] 生成指定范围的章纲
/mega-outline adjust [range]   调整大纲
```

### 动态生成章纲

当写到某章时，如果L3章纲不存在：

```
自动触发：
1. 读取L2篇纲
2. 结合已写内容
3. 生成该章的L3章纲
4. 保存供写作使用
```

---

## 大纲调整机制

### 向上反馈

```
问题发现：写作中发现L3章纲不合理
     ↓
调整L3：修改该章纲
     ↓
评估影响：是否影响L2篇纲？
     ↓ 是
调整L2：修改篇纲
     ↓
评估影响：是否影响L1卷纲？
     ↓ 是
调整L1：修改卷纲（需确认）
     ↓
评估影响：是否影响L0总纲？
     ↓ 是
暂停：需要人工确认总纲调整
```

### 调整记录

```json
{
  "adjustments": [
    {
      "id": "adj_001",
      "date": "2026-02-15",
      "level": "L2",
      "file": "v01-p02.md",
      "reason": "节奏过慢，需增加冲突",
      "changes": "合并章节15-16，增加突发事件",
      "approved": true
    }
  ]
}
```

---

## 大纲模板

### 种田流节奏模板

```
每卷100章的理想分布：

开局期（1-15章，15%）
├── 环境介绍
├── 困难展示
└── 目标确立

发展期（16-60章，45%）
├── 日常种田（60%）
├── 小冲突（30%）
└── 人际关系（10%）

转折期（61-75章，15%）
├── 重大问题出现
├── 资源/信任危机
└── 决策时刻

高潮期（76-90章，15%）
├── 问题解决
├── 成长展现
└── 胜利时刻

收尾期（91-100章，10%）
├── 成果巩固
├── 承上启下
└── 下卷铺垫
```

---

## 与其他模块协作

### 提供给 mega-novel-orchestrator

- 当前章节的章纲
- 相关上下文信息

### 来自 quality-monitor

- 节奏反馈
- 调整建议

### 管理 consistency-checker-mega 的数据来源

- 提供章节安排信息
- 人物登场计划

---

**版本**：v1.0
**更新**：2026-01-25
**依赖**：mega-novel-orchestrator
